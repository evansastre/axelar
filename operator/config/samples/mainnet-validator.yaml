apiVersion: blockchain.axelar.network/v1alpha1
kind: AxelarNode
metadata:
  name: axelar-mainnet-validator
  namespace: axelar-mainnet
spec:
  nodeType: validator
  network: mainnet
  moniker: "axelar-k8s-validator"
  
  image:
    repository: axelarnet/axelar-core
    tag: v0.35.5
    pullPolicy: IfNotPresent
  
  resources:
    requests:
      cpu: "8"
      memory: "16Gi"
    limits:
      cpu: "16"
      memory: "32Gi"
  
  storage:
    size: "2Ti"
    storageClass: "fast-ssd"
    backup:
      enabled: true
      schedule: "0 1 * * *"  # Daily at 1 AM
      retention: "30d"
  
  validator:
    enabled: true
    keyManagement:
      autoRotation: false
      rotationSchedule: "0 0 1 * *"  # Monthly
      backupKeys: true
    slashing:
      protection: true
      maxMissedBlocks: 50
  
  networking:
    p2p:
      port: 26656
      externalAddress: ""  # Will be auto-detected
      persistentPeers:
        - "f4f605d60b8ffaaf15240564e58a81103510631c@159.203.9.164:26656"
        - "4f2441bc0a80148efb5e9c6c5a8b5b3c7b5b5b5b@165.227.138.48:26656"
      seeds:
        - "ade4d8bc8cbe014af6ebdf3cb7b1e9ad36f412c0@seeds.polkachu.com:15956"
    rpc:
      enabled: true
      port: 26657
      cors: false
    api:
      enabled: true
      port: 1317
  
  monitoring:
    enabled: true
    prometheus:
      port: 26660
      path: "/metrics"
    alerts:
      enabled: true
      slack:
        webhook: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
        channel: "#axelar-alerts"
  
  upgrade:
    strategy: manual  # Validators should upgrade manually
    autoUpgrade: false
    preUpgradeBackup: true
    rollbackOnFailure: true
  
  security:
    podSecurityContext:
      runAsUser: 1000
      runAsGroup: 1001
      fsGroup: 1001
    networkPolicies: true
    secretManagement:
      provider: vault  # Use Vault for production
      autoRotation: true
